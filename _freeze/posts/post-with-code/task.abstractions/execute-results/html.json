{
  "hash": "1089bf171c40c9cafa4b2c4024a8c965",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Task Abstraction\"\nauthor: \"Alexis Means\"\ncode-fold: TRUE\n---\n\n\n\n## Getting set up\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#load packages####\nlibrary(dplyr)\nlibrary(tidyverse)\nlibrary(forcats)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Set Working Directory\nsetwd(\"C:/Users/Alexis Means/Documents/School/RDS/final.project/\")\n\n# Load Datasets\nbiomass <- read.csv(\"processed.data/biomass_clean.csv\")\ncomp <- read.csv(\"processed.data/composition_clean.csv\")\npheno <- read.csv(\"processed.data/phenology_clean.csv\")\nplants <- read.csv(\"processed.data/plant_list_clean.csv\")\nquality <- read.csv(\"processed.data/quality_clean.csv\")\ntransect <-read.csv(\"processed.data/transect_clean.csv\")\n```\n:::\n\n\n\n## Proportion of Families Observed\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Plotting family proportions####\nfam_prop<- comp %>%\n  mutate(spp_code = str_trim(spp_code)) %>%              # Remove extra spaces\n  filter(!str_to_lower(spp_code) %in%                   # Standardize case for filtering\n           str_to_lower(c(\"Litter\", \"Water\", \"Lichen\", \"Rocks\", \"Earth\"))) %>% \n  left_join(plants, by = \"spp_code\") %>% \n  count(Family) %>% \n  arrange(n) %>% \n  mutate(proportions = n/sum(n)* 100) %>% \n  rename(fam_count = n)\n\ntop_fam <-  fam_prop %>% \n  arrange(desc(proportions)) %>% \n  slice_head(n = 10)\n\nggplot(top_fam, aes(x = fct_reorder(Family, -proportions), y = proportions, fill = Family)) +\n  geom_bar(stat = \"identity\") +\n  scale_fill_viridis_d(option = \"viridis\") + \n  labs(\n    x = \"Family\",\n    y = \"Proportion (%)\",\n    title = \"Top 10 Families by Proportion\"\n  ) +\n  theme_minimal() +\n  theme(\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](task.abstractions_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n## Proportion of Species Observed\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Plotting Spp proportions####\n#top 10 spp bar plot***  \n### use this one \nspp_num <- comp %>%\n  mutate(spp_code = str_trim(spp_code)) %>%              # Remove extra spaces\n  filter(!str_to_lower(spp_code) %in%                   # Standardize case for filtering\n           str_to_lower(c(\"Litter\", \"Water\", \"Lichen\", \"Rocks\", \"Earth\"))) %>%\n  count(spp_code) %>%\n  arrange(n) %>%\n  left_join(plants, by = \"spp_code\") %>%\n  mutate(proportion = (n / sum(n)) * 100) %>% \n  rename(spp_count = n, spp_code_prop = proportion) \n\ntop_spp <- spp_num %>%\n  arrange(desc(spp_code_prop)) %>%\n  slice_head(n = 10)  # Select top 10 species\n\n\nggplot(top_spp, aes(x = fct_reorder(spp_code, -spp_code_prop), y = spp_code_prop, fill = status)) +\n  geom_bar(stat = \"identity\") +\n  theme_minimal() +\n  labs(\n    x = \"Species Code\",\n    y = \"Proportion (%)\",\n    title = \"Top 20 Species by Proportion\",\n    fill = \"status\"\n  )+\n  theme(\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](task.abstractions_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n## Species Status Observed\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninv <- comp %>%\n  mutate(spp_code = str_trim(spp_code)) %>%              # Remove extra spaces\n  filter(!str_to_lower(spp_code) %in%                   # Standardize case for filtering\n           str_to_lower(c(\"Litter\", \"Water\", \"Lichen\", \"Rocks\", \"Earth\"))) %>%\n  left_join(plants, by = \"spp_code\") %>%\n  count(status) %>%\n  arrange(n) %>% \n  mutate(proportion = (n / sum(n)) * 100)\n\nggplot(inv, aes(x = \"\", y = proportion, fill = status)) +\n  geom_bar(stat = \"identity\", width = 1) +\n  coord_polar(\"y\") +\n  labs(title = \"Species Status\") +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](task.abstractions_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "task.abstractions_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}