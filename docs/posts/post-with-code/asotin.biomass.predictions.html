<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alexis Means">
<meta name="dcterms.date" content="2026-01-20">

<title>John Day Suitable Biomass Predictions using Asotin GAM – Means Portfolio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-dfb324f25d9b1687192fa8be62ac8f9c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="../../site_libs/datatables-binding-0.34.0/datatables.js"></script>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="../../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="../../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="../../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<link href="../../site_libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">

<script src="../../site_libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>



<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Means Portfolio</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Alexis Means</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">John Day Suitable Biomass Predictions using Asotin GAM</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Alexis Means </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 20, 2026</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="asotin-data" class="level2">
<h2 class="anchored" data-anchor-id="asotin-data">Asotin Data</h2>
<p>Below is the final Asotin model and an example of Katey’s dataset. I made some adjustments to the John Day categorical variables (PVT and Fire Category) to match her data structure. The “Intermediate” and “Scabland” PVT types were combined into “Shrubland” because Katey’s dataset didn’t include these categories. I also classified all Fire Category observations as “pre-fire”.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">##############################################################################</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#load packages################################################################</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mgcv)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="do">##############################################################################</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Import study area file#######################################################</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>study.area <span class="ot">=</span> <span class="fu">vect</span>(<span class="st">"C:/Users/Alexis Means/Documents/Project/Nutrition Sampling/2025_GRTS/summer24_MCP-buffer-.5mi/summer24_MCP-buffer-.5mi.shp"</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>study.area <span class="ot">=</span> <span class="fu">project</span>(study.area,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"EPSG:32610"</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="do">##############################################################################</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co">#Import models################################################################</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>Asotin <span class="ot">=</span> <span class="fu">readRDS</span>(<span class="st">"C:/Users/Alexis Means/Documents/Project/Nutrition Sampling/R code/GAM/Asotin-Full-FinalModel.RDS"</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>Asotin_data <span class="ot">&lt;-</span> <span class="fu">model.frame</span>(Asotin)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Asotin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Family: gaussian 
Link function: identity 

Formula:
UsableBiomass_L ~ s(MeanTempCub) + PVTGroup + own + FireCat + 
    CumPPT + HLI + NDVI + Slope + DEMCub

Parametric coefficients:
                    Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)        1.285e+01  3.249e+00   3.955 0.000152 ***
PVTGroupGrassland -6.249e-01  1.046e+00  -0.597 0.551733    
PVTGroupRiparian   3.825e-01  1.679e+00   0.228 0.820313    
PVTGroupShrubland  9.095e-01  1.265e+00   0.719 0.474008    
ownPublic          1.331e+00  6.575e-01   2.024 0.045952 *  
FireCatPost       -5.670e+00  3.515e+00  -1.613 0.110165    
FireCatPre        -3.793e+00  2.983e+00  -1.272 0.206753    
CumPPT             1.473e-02  8.084e-03   1.822 0.071798 .  
HLI               -2.915e+00  1.207e+00  -2.414 0.017802 *  
NDVI              -3.946e+00  2.370e+00  -1.665 0.099360 .  
Slope             -4.424e-02  2.405e-02  -1.839 0.069174 .  
DEMCub            -4.213e-09  1.404e-09  -3.000 0.003490 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Approximate significance of smooth terms:
                 edf Ref.df     F  p-value    
s(MeanTempCub) 4.988      9 3.605 1.23e-05 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

R-sq.(adj) =  0.664   Deviance explained = 71.4%
-REML = 252.25  Scale est. = 4.1941    n = 107</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(Asotin_data), </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">"Sample of Asotin data used in analysis"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Sample of Asotin data used in analysis</caption>
<colgroup>
<col style="width: 16%">
<col style="width: 10%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">UsableBiomass_L</th>
<th style="text-align: left;">PVTGroup</th>
<th style="text-align: left;">own</th>
<th style="text-align: left;">FireCat</th>
<th style="text-align: right;">CumPPT</th>
<th style="text-align: right;">HLI</th>
<th style="text-align: right;">NDVI</th>
<th style="text-align: right;">Slope</th>
<th style="text-align: right;">DEMCub</th>
<th style="text-align: right;">MeanTempCub</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5.054388</td>
<td style="text-align: left;">Grassland</td>
<td style="text-align: left;">Public</td>
<td style="text-align: left;">Post</td>
<td style="text-align: right;">256.86</td>
<td style="text-align: right;">0.9777751</td>
<td style="text-align: right;">0.5397137</td>
<td style="text-align: right;">35.12972</td>
<td style="text-align: right;">489303872</td>
<td style="text-align: right;">5591.309</td>
</tr>
<tr class="even">
<td style="text-align: right;">5.577990</td>
<td style="text-align: left;">Grassland</td>
<td style="text-align: left;">Public</td>
<td style="text-align: left;">Post</td>
<td style="text-align: right;">166.44</td>
<td style="text-align: right;">0.8633114</td>
<td style="text-align: right;">0.5997393</td>
<td style="text-align: right;">32.20446</td>
<td style="text-align: right;">667627624</td>
<td style="text-align: right;">1466.372</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-4.605170</td>
<td style="text-align: left;">Grassland</td>
<td style="text-align: left;">Private</td>
<td style="text-align: left;">Fire</td>
<td style="text-align: right;">28.56</td>
<td style="text-align: right;">0.5594872</td>
<td style="text-align: right;">0.4838070</td>
<td style="text-align: right;">33.18765</td>
<td style="text-align: right;">102503232</td>
<td style="text-align: right;">15681.755</td>
</tr>
<tr class="even">
<td style="text-align: right;">-4.605170</td>
<td style="text-align: left;">Grassland</td>
<td style="text-align: left;">Public</td>
<td style="text-align: left;">Fire</td>
<td style="text-align: right;">25.67</td>
<td style="text-align: right;">0.7068285</td>
<td style="text-align: right;">0.6858742</td>
<td style="text-align: right;">36.43016</td>
<td style="text-align: right;">245314376</td>
<td style="text-align: right;">13316.187</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-4.605170</td>
<td style="text-align: left;">Grassland</td>
<td style="text-align: left;">Public</td>
<td style="text-align: left;">Fire</td>
<td style="text-align: right;">31.08</td>
<td style="text-align: right;">0.5230526</td>
<td style="text-align: right;">0.6645859</td>
<td style="text-align: right;">43.46611</td>
<td style="text-align: right;">157464000</td>
<td style="text-align: right;">14344.454</td>
</tr>
<tr class="even">
<td style="text-align: right;">6.892141</td>
<td style="text-align: left;">Grassland</td>
<td style="text-align: left;">Public</td>
<td style="text-align: left;">Post</td>
<td style="text-align: right;">221.27</td>
<td style="text-align: right;">0.2927685</td>
<td style="text-align: right;">0.7911111</td>
<td style="text-align: right;">36.50328</td>
<td style="text-align: right;">196122941</td>
<td style="text-align: right;">4729.147</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> (<span class="st">"C:/Users/Alexis Means/Documents/Project/Nutrition Sampling/R code/GAM/processed.data/JD.data_Asotin.prediction_df.xlsx"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>JD_data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(d, <span class="st">"Sheet1"</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>JD_data <span class="ot">&lt;-</span> JD_data <span class="sc">%&gt;%</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Slope <span class="sc">!=</span> <span class="dv">32767</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="data-comparisons" class="level2">
<h2 class="anchored" data-anchor-id="data-comparisons">Data Comparisons</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(Asotin_data<span class="sc">$</span>CumPPT, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>), </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Histogram of Cumulative Precipitation"</span>, </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Cumulative Precipitation"</span>, </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">range</span>(<span class="fu">c</span>(Asotin_data<span class="sc">$</span>CumPPT, JD_data<span class="sc">$</span>CumPPT), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(JD_data<span class="sc">$</span>CumPPT, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.5</span>), <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Asotin_data"</span>, <span class="st">"JD_data"</span>), </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="fu">c</span>(<span class="fu">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>), <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.5</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="asotin.biomass.predictions_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Katey calculated cumulative precipitation starting on March 1st. I followed the same process but used March 15th as the start date for the John Day dataset. I could re-extract and recalculate from March 1st, but I think this would likely have minimal impact on the John Day precipitation range. I also verified that both datasets use millimeters of precipitation per day as the unit of measurement. I guess the John Day region receives substantially less rainfall than Asotin. This could reflect the rain shadow effect created by the Cascades.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(Asotin_data<span class="sc">$</span>HLI, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>), </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Histogram of Heat Load Index"</span>, </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"HLI"</span>, </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">range</span>(<span class="fu">c</span>(Asotin_data<span class="sc">$</span>HLI, JD_data<span class="sc">$</span>HLI), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(JD_data<span class="sc">$</span>HLI, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.5</span>), <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Asotin_data"</span>, <span class="st">"JD_data"</span>), </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="fu">c</span>(<span class="fu">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>), <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.5</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="asotin.biomass.predictions_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(Asotin_data<span class="sc">$</span>NDVI, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>), </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Histogram of NDVI"</span>, </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"NDVI"</span>, </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">range</span>(<span class="fu">c</span>(Asotin_data<span class="sc">$</span>NDVI, JD_data<span class="sc">$</span>NDVI), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(JD_data<span class="sc">$</span>NDVI, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.5</span>), <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Asotin_data"</span>, <span class="st">"JD_data"</span>), </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="fu">c</span>(<span class="fu">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>), <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.5</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="asotin.biomass.predictions_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Some of the NDVI values fall just outside of Katey’s range. These are likely from our fall sampling efforts. I could go back and remove those observations to see if that brings the data range closer to hers. I used Katey’s scripts to calculate NDVI, so they should be calculated correctly.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(Asotin_data<span class="sc">$</span>Slope, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>), </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Histogram of Slope"</span>, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Slope"</span>, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">range</span>(<span class="fu">c</span>(Asotin_data<span class="sc">$</span>Slope, JD_data<span class="sc">$</span>Slope), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(JD_data<span class="sc">$</span>Slope, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.5</span>), <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Asotin_data"</span>, <span class="st">"JD_data"</span>), </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="fu">c</span>(<span class="fu">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>), <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.5</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="asotin.biomass.predictions_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(Asotin_data<span class="sc">$</span>DEMCub, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>), </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Histogram of Digital Elevation Model Cubed"</span>, </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"DEM cubed"</span>, </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">range</span>(<span class="fu">c</span>(Asotin_data<span class="sc">$</span>DEMCub, JD_data<span class="sc">$</span>DEMCub), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(JD_data<span class="sc">$</span>DEMCub, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.5</span>), <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Asotin_data"</span>, <span class="st">"JD_data"</span>), </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="fu">c</span>(<span class="fu">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>), <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.5</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="asotin.biomass.predictions_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I talked with Emily about the elevation gradient of Asotin Creek. From what she recalls, the elevation there ranges from approximately 700 to 3,000 ft. The John Day is somewhat similar, though our maximum elevation is typically around 2,200 ft. Our data still falls within Asotin Creek’s range, so this shouldn’t be a major limitation for the predictions.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(Asotin_data<span class="sc">$</span>MeanTempCub, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>), </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Histogram of Mean Temp Cubed"</span>, </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Mean Temp Cubed"</span>, </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">range</span>(<span class="fu">c</span>(Asotin_data<span class="sc">$</span>MeanTempCub, JD_data<span class="sc">$</span>MeanTempCub), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(JD_data<span class="sc">$</span>MeanTempCub, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.5</span>), <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Asotin_data"</span>, <span class="st">"JD_data"</span>), </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="fu">c</span>(<span class="fu">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>), <span class="fu">rgb</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.5</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="asotin.biomass.predictions_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>A few values for mean daily temperature in the John Day fall just outside of Katey’s range. I’m not sure if these differences are large enough to significantly impact the prediction accuracy.</p>
</section>
<section id="predictions-and-graphs" class="level2">
<h2 class="anchored" data-anchor-id="predictions-and-graphs">Predictions and Graphs</h2>
<p>The predictions for Suitable Biomass are all over the place. Since the Asotin model uses log-transformed Suitable Biomass, I back-transformed the predictions to compare them on the original scale. I also kept the log-transformed versions of both observed and predicted values for comparison. The log-scale predictions look a bit better than the original-scale ones, but the model still isn’t predicting well for the John Day dataset.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#predict suitable biomass###</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>prediction.df <span class="ot">&lt;-</span> JD_data</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>prediction.df<span class="sc">$</span>predicted.sb <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">exp</span>(<span class="fu">predict</span>(Asotin, <span class="at">newdata =</span> prediction.df)), <span class="dv">2</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>prediction.df <span class="ot">&lt;-</span> prediction.df <span class="sc">%&gt;%</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sb_log =</span> <span class="fu">log</span>(Suitable_Biomass))</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>prediction.df<span class="sc">$</span>predicted.sb_log <span class="ot">=</span> <span class="fu">predict</span>(Asotin, <span class="at">newdata =</span> prediction.df)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>prediction.df <span class="ot">&lt;-</span> prediction.df <span class="sc">%&gt;%</span> </span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Observed_SB =</span> Suitable_Biomass,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">Predicted_SB =</span> predicted.sb,</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">Observed_SB_L =</span> sb_log,</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">Predicted_SB_L =</span> predicted.sb_log) <span class="sc">%&gt;%</span> </span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Observed_SB, Predicted_SB, Observed_SB_L, Predicted_SB_L, x, y, PVTGroup, PVTedit, own, FireCat, CumPPT, HLI, NDVI, Slope, DEMCub, MeanTempCub) <span class="sc">%&gt;%</span> </span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">2</span>)))</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(prediction.df, </span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>          <span class="at">caption =</span> <span class="st">"John Day Data"</span>,</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">25</span>, <span class="at">scrollX =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-c7d263aeeb6f5eddb609" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c7d263aeeb6f5eddb609">{"x":{"filter":"none","vertical":false,"caption":"<caption>John Day Data<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114"],[570.79,460.23,11.03,275.44,831.45,150.57,387.52,649.85,285.51,561.75,225.22,374.61,336.86,11.02,458.31,82.09999999999999,331.55,753.14,259.13,233.72,73.43000000000001,310.4,365.58,1575.87,16.92,26.41,321.63,385.09,293.03,259.09,171.37,144.71,326.93,118.79,133.41,215.57,175.44,201.42,363.85,530.26,749.98,176.05,93.97,292.31,35.5,19.02,181.49,409.03,373.17,185.92,220.9,84.90000000000001,314.04,355.53,314.02,170.97,995.79,954.05,107.7,175.7,205.3,127.92,577.42,118.4,482.85,283.8,296.18,379.87,43.6,383.19,272.3,31.68,129.19,422.2,0,362.2,66.2,13.37,0,45.75,65.47,51.6,313.54,16.54,58.77,244.2,494.15,540.6900000000001,115.06,235.07,99.28,458.79,90.67,38.07,540.63,398.15,487.82,293.83,492.18,3.73,41.5,35.06,420.89,228.78,242.34,110.21,268.63,606.45,599.11,399.62,984.6799999999999,898.8099999999999,35.05,510.36],[18129.98,21407.19,305.23,1623.19,19476.24,31.32,451.67,391.22,24.41,2921.27,59.26,526.27,1.46,260.12,70.70999999999999,0.05,446.76,4.56,36.18,3430.77,162.76,91.31999999999999,332.08,35.69,727.79,1.04,5815.84,1435.43,0.8100000000000001,3006.75,0,886.64,312.6,1871.22,378.61,11744.24,26.52,5036.73,141.23,1560.99,8655.82,37.37,5279.02,14.87,54.89,431.68,283.22,8141.77,21.29,189.06,638.5700000000001,3241.94,1037.07,3022.97,425.6,968.77,9804.790000000001,4386.99,86.19,2571.33,12110.85,10602.05,2.18,16953.21,87897.89,56476.89,8335.610000000001,1750.82,78227.46000000001,84663.59,1599655.27,392277,1800429.1,602123.86,0.19,97.15000000000001,0.01,3212.62,467.19,3991.19,1440.75,197.07,269.93,0.02,18.71,33657.42,53076.35,16364.15,248.25,8544.74,384.84,16712.32,6.89,65,8093.57,3229.48,6.66,8.31,8463.35,0.68,0.22,3.21,1799.83,42691.11,878.48,28456.25,14826.11,86794.41,3571.95,2.29,2338.37,267.05,0.48,9645.9],[6.35,6.13,2.4,5.62,6.72,5.01,5.96,6.48,5.65,6.33,5.42,5.93,5.82,2.4,6.13,4.41,5.8,6.62,5.56,5.45,4.3,5.74,5.9,7.36,2.83,3.27,5.77,5.95,5.68,5.56,5.14,4.97,5.79,4.78,4.89,5.37,5.17,5.31,5.9,6.27,6.62,5.17,4.54,5.68,3.57,2.95,5.2,6.01,5.92,5.23,5.4,4.44,5.75,5.87,5.75,5.14,6.9,6.86,4.68,5.17,5.32,4.85,6.36,4.77,6.18,5.65,5.69,5.94,3.78,5.95,5.61,3.46,4.86,6.05,null,5.89,4.19,2.59,null,3.82,4.18,3.94,5.75,2.81,4.07,5.5,6.2,6.29,4.75,5.46,4.6,6.13,4.51,3.64,6.29,5.99,6.19,5.68,6.2,1.32,3.73,3.56,6.04,5.43,5.49,4.7,5.59,6.41,6.4,5.99,6.89,6.8,3.56,6.24],[9.81,9.970000000000001,5.72,7.39,9.880000000000001,3.44,6.11,5.97,3.19,7.98,4.08,6.27,0.38,5.56,4.26,-2.92,6.1,1.52,3.59,8.140000000000001,5.09,4.51,5.81,3.57,6.59,0.04,8.67,7.27,-0.21,8.01,-5.5,6.79,5.74,7.53,5.94,9.369999999999999,3.28,8.52,4.95,7.35,9.07,3.62,8.57,2.7,4.01,6.07,5.65,9,3.06,5.24,6.46,8.08,6.94,8.01,6.05,6.88,9.19,8.390000000000001,4.46,7.85,9.4,9.27,0.78,9.74,11.38,10.94,9.029999999999999,7.47,11.27,11.35,14.29,12.88,14.4,13.31,-1.65,4.58,-4.88,8.07,6.15,8.289999999999999,7.27,5.28,5.6,-4.13,2.93,10.42,10.88,9.699999999999999,5.51,9.050000000000001,5.95,9.720000000000001,1.93,4.17,9,8.08,1.9,2.12,9.039999999999999,-0.38,-1.49,1.17,7.5,10.66,6.78,10.26,9.6,11.37,8.18,0.83,7.76,5.59,-0.73,9.17],[688441.16,691948.9399999999,695455.0699999999,691737.16,701855.1,697372.77,692980.22,702020.16,690648.95,698100.23,690374.36,690713.4,703351.13,695260.13,701603.12,696539.48,695199.67,695042.8,704076.5,692996.95,690821.21,694022.2,688062.1800000001,695057.37,707316.39,697917.8199999999,690636.85,697323.98,686642.58,697764.47,696966,695849.1,691119.66,702192.45,691098.84,697265.0699999999,695646.25,698659.4,691016.15,696287.7,698925.8199999999,688890.3199999999,693501.66,695309.54,690080.33,691897.15,702642.14,694331.89,701968.85,688343.49,689628.58,701940.13,686276.1899999999,698738,688068.6800000001,694362.52,702075.25,700899.61,696750.05,695785.26,693508.7,697827.51,702469.75,692624.3,692384.27,692825.22,690420.83,698821.66,695674.34,696561.5,695442.88,695625.98,701547.42,700912.5600000001,691710.91,693197.35,693462.6899999999,695901.36,694277.1800000001,696260.83,691959.13,698119.45,694734.39,695161.36,697551.85,694847.01,705468.55,698103.38,695979.59,695464.36,702829,695137.12,697554.04,695685.04,691213.5699999999,692126.4,697246.77,697334.09,695300.78,694159.5600000001,693388.21,699386.91,694013.21,696824.41,692879.33,697794.59,693014.95,694743.22,696484.1,697414.09,695090.25,690705,694825,694926.87],[5018448.36,5020370.89,5019114.06,5014392.22,5037682.39,5028898.28,5012903.31,5041912.57,5018652.48,5034287.83,5017503.36,5023012.12,5038535.82,5013582.61,5042308.4,5014499.58,5039871.73,5023717.16,5037139.18,5010756.66,5014947.17,5026097.58,5021106.76,5021571.48,5041865.21,5037989.65,5020794.82,5028679.9,5019611.38,5030896.66,5014043.58,5011607.04,5013957.67,5040352.27,5016101.95,5038941.04,5017476.46,5038738.13,5026815.25,5028916.62,5037762.39,5024572.89,5019500.92,5024878.56,5018484.13,5023853.07,5037762.23,5022966.87,5032752.81,5024400.87,5021034.65,5037033.43,5011454.91,5025886.45,5018965.42,5018684.48,5037626.08,5041567.41,5024220.56,5012528,5021395.93,5031582.54,5038739.77,5025591,5024259.32,5020760.1,5020283.48,5024426.76,5021382.63,5013411.63,5028213.13,5031524.82,5037832.64,5039770.68,5016941.1,5025003.63,5018210.96,5008468.45,5022935.16,5009146.75,5020267.79,5031788.56,5011855.09,5010441.59,5027185.81,5027031.52,5042000.13,5010351.67,5038316.95,5033121.1,5038373.25,5037328.81,5033256.46,5015411.6,5018951.98,5022762.55,5010123.67,5034949.86,5033370.67,5030464.15,5029078.22,5039579.68,5017357.17,5038722.59,5024506.85,5026419.45,5008359.87,5028233.72,5009829.76,5038729.98,5020075.76,5014894.74,5016488.12,5018250.4],["Shrubland","Shrubland","Shrubland","Shrubland","Shrubland","Shrubland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Shrubland","Shrubland","Shrubland","Shrubland","Shrubland","Riparian","Riparian","Riparian","Riparian","Grassland","Grassland","Shrubland","Grassland","Shrubland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Grassland","Shrubland","Shrubland","Shrubland","Grassland","Shrubland","Shrubland","Shrubland","Shrubland","Shrubland","Shrubland","Shrubland","Shrubland","Shrubland","Shrubland","Grassland","Grassland","Grassland","Grassland","Shrubland","Shrubland","Shrubland","Shrubland","Shrubland","Shrubland","Shrubland","Shrubland","Riparian","Riparian","Riparian","Riparian","Riparian","Riparian","Riparian","Riparian"],["Condensed","Condensed","Condensed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Condensed","Condensed","Condensed","Condensed","Condensed","Observed","Observed","Observed","Observed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Condensed","Observed","Observed","Observed","Observed","Observed","Observed","Observed","Observed"],["Public","Public","Public","Public","Public","Public","Public","Public","Private","Private","Private","Private","Public","Public","Public","Private","Private","Private","Public","Public","Private","Public","Private","Private","Public","Public","Public","Public","Private","Private","Private","Public","Public","Public","Private","Public","Private","Public","Public","Public","Public","Private","Public","Private","Private","Public","Public","Public","Private","Private","Private","Public","Private","Public","Private","Public","Public","Public","Private","Public","Public","Public","Public","Public","Public","Public","Public","Private","Private","Private","Private","Public","Public","Public","Public","Public","Public","Public","Public","Public","Public","Public","Private","Public","Public","Public","Public","Private","Public","Public","Public","Private","Public","Private","Public","Public","Private","Public","Public","Public","Public","Public","Public","Public","Public","Public","Public","Public","Public","Public","Public","Private","Private","Private"],["Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre","Pre"],[55,19.2,62.9,57.3,18.6,65.09999999999999,59.3,18.6,53.9,19.2,63.6,19.2,56.3,65.59999999999999,20.5,74,58.6,49,61.9,55.8,57.3,49,62.9,51.6,57.6,53.9,34.8,56.3,71.2,19.2,78.09999999999999,19.2,52.3,54.1,57.3,48,66.7,18.9,49.9,19.2,18.9,66.90000000000001,18.9,49,62,59.5,46.7,55.6,73.3,68.2,39.2,32.4,68.59999999999999,18.2,58.6,19.6,18.6,44.6,64.90000000000001,65.59999999999999,55.1,52.1,56.3,19.1,53.3,54.2,19.2,65.59999999999999,63.1,86.5,57.9,57.9,52.1,52.1,54,36.4,55.2,32.6,50,32.6,37.6,49.1,59.2,62.1,54.1,36.1,32.8,71.5,33.2,44.5,42.3,35.1,45.1,58.1,34.9,41.7,71.5,45.1,44.5,45.4,45.4,41.5,55.8,19.4,36.1,35.9,41.2,17.7,49.1,42.2,34.7,50.6,55.8,55.2],[0.75,0.36,0.63,0.79,0.75,0.77,0.93,0.95,0.37,0.63,0.5,0.5600000000000001,0.76,0.93,0.91,0.73,0.57,0.95,0.91,0.8,0.92,0.5600000000000001,0.71,0.78,0.24,0.62,0.71,0.73,0.67,0.34,0.7,0.91,0.88,0.92,0.62,0.77,0.5600000000000001,0.92,0.65,0.86,0.5,0.63,0.6899999999999999,0.6,0.62,0.53,0.54,0.67,0.74,0.7,0.72,0.87,0.67,0.6899999999999999,0.9399999999999999,0.86,0.62,0.67,0.67,0.9,0.85,0.95,0.67,0.89,0.3,0.6899999999999999,0.83,0.75,0.46,0.79,0.68,0.39,0.64,0.46,0.3,0.73,0.45,0.89,0.7,0.65,0.63,0.89,0.77,0.65,0.95,0.62,0.68,0.6,0.74,0.36,0.66,0.28,0.91,0.63,0.39,0.36,0.82,0.39,0.47,0.62,0.52,0.44,0.43,0.85,0.78,0.85,0.67,0.68,0.88,0.67,0.76,0.57,0.83,0.73],[0.83,0.85,0.24,0.76,0.8100000000000001,0.26,0.64,0.89,0.88,0.79,0.58,0.89,0.58,0.33,0.92,0.36,0.53,0.77,0.8100000000000001,0.8100000000000001,0.74,0.93,0.77,0.77,0.22,0.35,0.82,0.76,0.58,0.85,0.58,0.77,0.82,0.63,0.79,0.65,0.57,0.8,0.78,0.85,0.79,0.57,0.88,0.86,0.55,0.25,0.76,0.77,0.8100000000000001,0.39,0.82,0.85,0.72,0.88,0.82,0.88,0.85,0.86,0.58,0.45,0.8,0.93,0.36,0.84,0.67,0.76,0.85,0.12,0.02,0.02,0,0.16,0,0.01,0.28,0.83,0.55,0.62,0.38,0.78,0.78,0.72,0.44,0.15,0.7,0.7,0.76,0.45,0.87,0.82,0.72,0.8100000000000001,0.57,0.08,0.72,0.8,0.49,0.39,0.82,0.65,0.35,0.23,0.45,0.7,0.8,0.83,0.64,0.76,0.68,0.11,0.8100000000000001,0.6,0.9399999999999999,0.55],[7,26,2,10,23,25,26,35,24,6,22,10,9,26,27,8,8,30,27,11,31,8,4,14,39,27,14,27,1,31,3,23,28,27,11,15,10,24,2,29,27,33,24,12,31,34,21,1,13,16,5,30,4,1,28,34,5,37,5,28,33,28,3,21,37,6,14,14,20,10,2,26,24,17,34,31,27,31,3,5,6,24,11,20,29,5,24,22,28,27,21,33,29,5,29,35,13,28,21,26,19,17,19,28,18,17,5,1,22,5,8,10,13,13],[356400829,311665752,377933067,37595375,17984728,168196608,81746504,11390625,211708736,188132517,311665752,363994344,6028568,149721291,30371328,549353259,129554216,195112000,69934528,31255875,198155287,219256227,428661064,153990656,8489664,83453453,45499293,112678587,398688256,75686967,567663552,433798093,172808693,59319000,371694959,5177717,425259008,49430863,262144000,192100033,81182737,209584584,99897344,327082769,244140625,191102976,30080231,298077632,193100552,341532099,390617891,57960603,481890304,341532099,254840104,198155287,60236288,8242408,371694959,382657176,17373979,100544625,3869893,61629875,14886936,12326391,32461759,36926037,314432000,274625000,10360232,99897344,8998912,99897344,19683000,18609625,188132517,182284263,296740963,421875000,344472101,202262003,397065375,425259008,154854153,234885113,16387064,385828352,24642171,26730899,14706125,51895117,128024064,531441000,74088000,190109375,533411731,107171875,7762392,33076161,16387064,9261000,327082769,11390625,44361864,101847563,47437928,8998912,250047000,4741632,70444997,184220009,267089984,135005697],[884.74,614.13,22306.69,4370.72,1108.72,20458.42,3341.36,2048.38,8000,592.7,5132.95,1242.3,10867.29,7472.06,3723.88,11164.33,4057.72,8242.41,8303.77,2171.75,2197,6486.89,2299.97,4699.42,23763.67,11015.14,1386.2,2352.64,10360.23,541.34,11852.35,592.7,2744,2248.09,2197,1501.12,8615.129999999999,205.38,6229.5,582.1799999999999,716.92,7077.89,294.08,6486.89,4574.3,8303.77,4913,1174.24,8303.77,3981.88,1242.3,531.4400000000001,1404.93,955.67,804.36,704.97,1108.72,912.67,4492.13,2863.29,1423.83,541.34,11697.08,592.7,804.36,1191.02,1386.2,7940.15,274.63,180.36,205.38,205.38,521.66,521.66,15069.22,4451.41,13227.98,830.58,6178.86,830.58,3477.27,5735.34,4784.09,13997.52,9595.700000000001,1501.12,669.92,1045.68,5451.78,2985.98,8741.82,941.1900000000001,10218.31,9731.809999999999,1622.23,1643.03,8934.17,10431.68,2985.98,17173.51,13997.52,16003.01,7357.98,195.11,4173.28,483.74,2628.07,438.98,1906.62,15813.25,3112.14,5639.75,21024.58,1520.88]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Observed_SB<\/th>\n      <th>Predicted_SB<\/th>\n      <th>Observed_SB_L<\/th>\n      <th>Predicted_SB_L<\/th>\n      <th>x<\/th>\n      <th>y<\/th>\n      <th>PVTGroup<\/th>\n      <th>PVTedit<\/th>\n      <th>own<\/th>\n      <th>FireCat<\/th>\n      <th>CumPPT<\/th>\n      <th>HLI<\/th>\n      <th>NDVI<\/th>\n      <th>Slope<\/th>\n      <th>DEMCub<\/th>\n      <th>MeanTempCub<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":25,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,11,12,13,14,15,16]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Observed_SB","targets":1},{"name":"Predicted_SB","targets":2},{"name":"Observed_SB_L","targets":3},{"name":"Predicted_SB_L","targets":4},{"name":"x","targets":5},{"name":"y","targets":6},{"name":"PVTGroup","targets":7},{"name":"PVTedit","targets":8},{"name":"own","targets":9},{"name":"FireCat","targets":10},{"name":"CumPPT","targets":11},{"name":"HLI","targets":12},{"name":"NDVI","targets":13},{"name":"Slope","targets":14},{"name":"DEMCub","targets":15},{"name":"MeanTempCub","targets":16}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="visualizations" class="level2">
<h2 class="anchored" data-anchor-id="visualizations">Visualizations</h2>
<p>I created a couple of visualizations to see how well the Asotin GAM is predicting. The first set of histograms shows the distribution of predicted versus observed suitable biomass. While the observed values fall within the predicted range, the Asotin GAM predictions are much more spread out, with most predictions falling just above the actual observed values.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#removing a point, something weird is going on with the Slope</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>prediction.df <span class="ot">&lt;-</span> prediction.df <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Slope <span class="sc">!=</span> <span class="dv">32767</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="do">##visualization of histogram for predicted vs measured suitable biomass</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>prediction.df <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(Observed_SB_L, Predicted_SB_L), </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Type"</span>, </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Value, <span class="at">fill =</span> Type)) <span class="sc">+</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">position =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Suitable Biomass(Log)"</span>, <span class="at">y =</span> <span class="st">"Count"</span>, <span class="at">title =</span> <span class="st">"Observed vs Predicted Distributions"</span>) <span class="sc">+</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="asotin.biomass.predictions_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The red line in these graphs represents a 1:1 ratio where predictions would perfectly match observations. For the most part, the Asotin model predicts slightly above the observed values on the log scale. However, when I back-transform these predictions to the original scale, some values blow up to extremely large numbers. This aligns with the histogram above, the Asotin model is consistently overpredicting suitable biomass compared to what we actually observed in the John Day dataset.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Log scale</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(prediction.df<span class="sc">$</span>Observed_SB_L, prediction.df<span class="sc">$</span>Predicted_SB_L,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Observed log(Biomass)"</span>, <span class="at">ylab =</span> <span class="st">"Predicted log(Biomass)"</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Observed vs Predicted (Log Scale)"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)  <span class="co"># 1:1 line</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="asotin.biomass.predictions_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Original scale</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(prediction.df<span class="sc">$</span>Observed_SB, prediction.df<span class="sc">$</span>Predicted_SB,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Observed Biomass"</span>, <span class="at">ylab =</span> <span class="st">"Predicted Biomass"</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Observed vs Predicted (Original Scale)"</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="asotin.biomass.predictions_files/figure-html/unnamed-chunk-10-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>When I plotted the residuals (Observed Biomass - Predicted Biomass), there was a clear negative trend. Which I believe means the model is systematically off, it is underpredicting low biomass and overpredicting high biomass.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate residuals</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>prediction.df <span class="ot">&lt;-</span> prediction.df <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">residuals_log =</span> Observed_SB_L <span class="sc">-</span> Predicted_SB_L,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">residuals_original =</span> Observed_SB <span class="sc">-</span> Predicted_SB)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Residuals vs Predicted</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(prediction.df<span class="sc">$</span>Predicted_SB_L, prediction.df<span class="sc">$</span>residuals_log,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Predicted log(Biomass)"</span>, <span class="at">ylab =</span> <span class="st">"Residuals"</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Residuals vs Predicted (Log)"</span>)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>lowess_line <span class="ot">&lt;-</span> <span class="fu">lowess</span>(prediction.df<span class="sc">$</span>Predicted_SB_L, prediction.df<span class="sc">$</span>residuals_log)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(lowess_line, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="asotin.biomass.predictions_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="whats-next" class="level2">
<h2 class="anchored" data-anchor-id="whats-next">What’s next</h2>
<ul>
<li><p>I reached out to Katey to ask for a version of the Asotin model without the Fire Category variable. Since everything in my dataset is classified as “Pre-Fire,” I’m not sure how much that’s skewing the predictions.</p></li>
<li><p>Do you have any suggestions for identifying what might be causing the Asotin model to predict so poorly for John Day?</p></li>
<li><p>I’m trying to think of ways to improve model transferability across study systems. I’m wondering if scaling all the covariates in the Asotin model before fitting would improve predictions and make them more comparable between different study systems. What are your thoughts on this?</p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>